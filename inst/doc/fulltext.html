<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Scott Chamberlain" />

<meta name="date" content="2020-04-07" />

<title>Full text</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Full text</h1>
<h4 class="author">Scott Chamberlain</h4>
<h4 class="date">2020-04-07</h4>



<p>Search functions in <code>rplos</code> can be used to get back full text in addition to any section of an article. However, if you prefer XML, this vignette is for you.</p>
<div id="load-package-from-cran" class="section level3">
<h3>Load package from CRAN</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;rplos&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(<span class="st">&#39;rplos&#39;</span>)</span></code></pre></div>
</div>
<div id="get-full-text-urls" class="section level3">
<h3>Get full text URLs</h3>
<p>Create urls for full text articles in PLOS journals</p>
<p>Hereâ€™s the URL for XML full text for the DOI <code>10.1371/journal.pone.0086169</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">full_text_urls</span>(<span class="dt">doi =</span> <span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0086169&amp;type=manuscript&quot;</code></pre>
<p>And for the DOI <code>10.1371/journal.pbio.1001845</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">full_text_urls</span>(<span class="dt">doi =</span> <span class="st">&#39;10.1371/journal.pbio.1001845&#39;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;http://journals.plos.org/plosbiology/article/file?id=10.1371/journal.pbio.1001845&amp;type=manuscript&quot;</code></pre>
<p>The function is vectorized, so you can pass in many DOIs</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">full_text_urls</span>(<span class="dt">doi =</span> <span class="kw">c</span>(<span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                       <span class="st">&#39;10.1371/journal.pbio.1001845&#39;</span>))</span></code></pre></div>
<pre><code>#&gt; [1] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0086169&amp;type=manuscript&quot;    
#&gt; [2] &quot;http://journals.plos.org/plosbiology/article/file?id=10.1371/journal.pbio.1001845&amp;type=manuscript&quot;</code></pre>
<p>Use <code>searchplos()</code> to get a lot of DOIs, then get the URLs for full text XML</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>dois &lt;-<span class="st"> </span><span class="kw">searchplos</span>(<span class="dt">q =</span> <span class="st">&quot;*:*&quot;</span>, <span class="dt">fq =</span> <span class="st">&#39;doc_type:full&#39;</span>, <span class="dt">limit =</span> <span class="dv">20</span>)<span class="op">$</span>data<span class="op">$</span>id</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">full_text_urls</span>(dois)</span></code></pre></div>
<pre><code>#&gt;  [1] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020843&amp;type=manuscript&quot;
#&gt;  [2] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0022257&amp;type=manuscript&quot;
#&gt;  [3] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023139&amp;type=manuscript&quot;
#&gt;  [4] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023138&amp;type=manuscript&quot;
#&gt;  [5] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023119&amp;type=manuscript&quot;
#&gt;  [6] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023113&amp;type=manuscript&quot;
#&gt;  [7] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023133&amp;type=manuscript&quot;
#&gt;  [8] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023106&amp;type=manuscript&quot;
#&gt;  [9] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023117&amp;type=manuscript&quot;
#&gt; [10] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023135&amp;type=manuscript&quot;
#&gt; [11] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023134&amp;type=manuscript&quot;
#&gt; [12] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0023105&amp;type=manuscript&quot;
#&gt; [13] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020929&amp;type=manuscript&quot;
#&gt; [14] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020900&amp;type=manuscript&quot;
#&gt; [15] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020913&amp;type=manuscript&quot;
#&gt; [16] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020935&amp;type=manuscript&quot;
#&gt; [17] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020914&amp;type=manuscript&quot;
#&gt; [18] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020919&amp;type=manuscript&quot;
#&gt; [19] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020899&amp;type=manuscript&quot;
#&gt; [20] &quot;http://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020892&amp;type=manuscript&quot;</code></pre>
</div>
<div id="get-xml" class="section level3">
<h3>Get XML</h3>
<p>Get full text XML of PLOS papers given a DOI</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">plos_fulltext</span>(<span class="dt">doi =</span> <span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>)</span></code></pre></div>
<pre><code>#&gt; 1 full-text articles retrieved 
#&gt; Min. Length: 110717 - Max. Length: 110717 
#&gt; DOIs: 10.1371/journal.pone.0086169 ... 
#&gt; 
#&gt; NOTE: extract xml strings like output[&#39;&lt;doi&gt;&#39;]</code></pre>
<p><code>plos_fulltext()</code> is vectorized, so you can pass in more than one DOI</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">plos_fulltext</span>(<span class="kw">c</span>(<span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>,<span class="st">&#39;10.1371/journal.pbio.1001845&#39;</span>))</span></code></pre></div>
<pre><code>#&gt; 2 full-text articles retrieved 
#&gt; Min. Length: 110717 - Max. Length: 143442 
#&gt; DOIs: 10.1371/journal.pone.0086169 10.1371/journal.pbio.1001845 ... 
#&gt; 
#&gt; NOTE: extract xml strings like output[&#39;&lt;doi&gt;&#39;]</code></pre>
<p>Get many DOIs, then index to get the full XML of the one you want (output not shown)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>dois &lt;-<span class="st"> </span><span class="kw">searchplos</span>(<span class="dt">q =</span> <span class="st">&quot;*:*&quot;</span>, <span class="dt">fq =</span> <span class="st">&#39;doc_type:full&#39;</span>, <span class="dt">limit =</span> <span class="dv">3</span>)<span class="op">$</span>data<span class="op">$</span>id</span>
<span id="cb15-2"><a href="#cb15-2"></a>out &lt;-<span class="st"> </span><span class="kw">plos_fulltext</span>(dois)</span>
<span id="cb15-3"><a href="#cb15-3"></a>xml &lt;-<span class="st"> </span>out[dois[<span class="dv">1</span>]][[<span class="dv">1</span>]]</span></code></pre></div>
<p>Extract the abstract from the XML</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;xml2&quot;</span>)) {</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="kw">library</span>(<span class="st">&quot;xml2&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="kw">xml_text</span>(<span class="kw">xml_find_all</span>(<span class="kw">read_xml</span>(xml), <span class="st">&quot;//abstract&quot;</span>))</span>
<span id="cb16-4"><a href="#cb16-4"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;BackgroundWolbachia are intriguing symbiotic endobacteria with a peculiar host range that includes arthropods and a single nematode family, the Onchocercidae encompassing agents of filariases. This raises the question of the origin of infection in filariae. Wolbachia infect the female germline and the hypodermis. Some evidences lead to the theory that Wolbachia act as mutualist and coevolved with filariae from one infection event: their removal sterilizes female filariae; all the specimens of a positive species are infected; Wolbachia are vertically inherited; a few species lost the symbiont. However, most data on Wolbachia and filaria relationships derive from studies on few species of Onchocercinae and Dirofilariinae, from mammals.Methodology/Principal FindingsWe investigated the Wolbachia distribution testing 35 filarial species, including 28 species and 7 genera and/or subgenera newly screened, using PCR, immunohistochemical staining, whole mount fluorescent analysis, and cocladogenesis analysis. (i) Among the newly screened Onchocercinae from mammals eight species harbour Wolbachia but for some of them, bacteria are absent in the hypodermis, or in variable density. (ii) Wolbachia are not detected in the pathological model Monanema martini and in 8, upon 9, species of Cercopithifilaria. (iii) Supergroup F Wolbachia is identified in two newly screened Mansonella species and in Cercopithifilaria japonica. (iv) Type F Wolbachia infect the intestinal cells and somatic female genital tract. (v) Among Oswaldofilariinae, Waltonellinae and Splendidofilariinae, from saurian, anuran and bird respectively, Wolbachia are not detected.Conclusions/SignificanceThe absence of Wolbachia in 63% of onchocercids, notably in the ancestral Oswaldofilariinae estimated 140 mya old, the diverse tissues or specimens distribution, and a recent lateral transfer in supergroup F Wolbachia, modify the current view on the role and evolution of the endosymbiont and their hosts. Further genomic analyses on some of the newly sampled species are welcomed to decipher the open questions.&quot;</code></pre>
<p>Extract reference lists, just give back first one from each for brevity sake</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="cf">if</span> (<span class="kw">requireNamespace</span>(<span class="st">&quot;xml2&quot;</span>)) {</span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="kw">library</span>(<span class="st">&quot;xml2&quot;</span>)</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="kw">lapply</span>(out[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>], <span class="cf">function</span>(x){</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="kw">xml_find_all</span>(<span class="kw">read_xml</span>(x), <span class="st">&quot;//ref-list/ref&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb18-5"><a href="#cb18-5"></a>  })</span>
<span id="cb18-6"><a href="#cb18-6"></a>}</span></code></pre></div>
<pre><code>#&gt; $`10.1371/journal.pone.0022257`
#&gt; {xml_node}
#&gt; &lt;ref id=&quot;pone.0022257-Gao1&quot;&gt;
#&gt; [1] &lt;label&gt;1&lt;/label&gt;
#&gt; [2] &lt;element-citation publication-type=&quot;journal&quot; xlink:type=&quot;simple&quot;&gt;\n  &lt;per ...
#&gt; 
#&gt; $`10.1371/journal.pone.0023139`
#&gt; {xml_node}
#&gt; &lt;ref id=&quot;pone.0023139-DeLanghe1&quot;&gt;
#&gt; [1] &lt;label&gt;1&lt;/label&gt;
#&gt; [2] &lt;element-citation publication-type=&quot;journal&quot; xlink:type=&quot;simple&quot;&gt;\n  &lt;per ...</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
